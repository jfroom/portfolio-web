(function(){!function(a,b,c){var d,e;return a.OffcanvasNav=function(d){var e,f,g,h,i;return h={debug:!1,coverSelector:".flyout-cover",slideTargetSelector:".offcanvas-slide",toggleBtnSelector:".navbar-toggle",offcanvasNavSelector:"header.flyout",coverActiveClass:"active",widthBreakPoint:768,xMax:150,xMin:0,xMoveThresholdForClick:10,animationDuration:400,closeWhenInnerLinksClicked:!0},h=c.extend(h,d),i=new Date,e=function(a){var b,c;return b=new Date,c=b-i,h.debug?"undefined"!=typeof console&&null!==console?console.log("[offcanvas "+c+"] "+a):void 0:void 0},g={touchStartX:0,isTouchDown:!1,xCur:0,$cover:null,$toggleBtn:null,$slideTargets:null,isOpen:!1,hasDragged:!1,xCoverDragStart:0,offcanvasDelay_id:0,EVENT_OFFCANVASNAV_CLOSE:"offcanvasnav-close",EVENT_OFFCANVASNAV_TRANSITION_CLOSE_COMPLETE:"offcanvasnav-transition-close-complete",EVENT_OFFCANVASNAV_TRANSITION_OPEN_COMPLETE:"offcanvasnav-transition-open-complete",CLASS_OFFCANVAS_READY:"offcanvasnav-ready",init:function(){var a;return a=this,a.startup()},startup:function(){var a;return a=this,a.$cover=c(h.coverSelector),a.$slideTargets=c(h.slideTargetSelector),a.$offcanvasNav=c(h.offcanvasNavSelector),a.$toggleBtn=c(h.toggleBtnSelector),a.$toggleBtn.data("offcanvas_isToggleBtn",!0),a.handleWindowResize(),a.offcanvasActivate(!1),a.bindToggleBtn(!0),h.closeWhenInnerLinksClicked&&a.bindInnerLinkEvents(!0),c("html").addClass(a.CLASS_OFFCANVAS_READY)},close:function(){var a;return a=this,e("close isOpen? _.isOpen:"+a.isOpen),a.isOpen?(a.coverOpenToggle(!1),a.coverActivate(!1)):void 0},open:function(){var a;return a=this,e("open isOpen? _.isOpen:"+a.isOpen),a.isOpen?void 0:(a.coverOpenToggle(!0),a.coverActivate(!0))},getIsOpen:function(){return this.isOpen},destroy:function(){var a,b;return b=this,b.close(),b.bindToggleBtn(!1),c("html").removeClass(b.CLASS_OFFCANVAS_READY),g=null,a=null},bindToggleBtn:function(a){var b;return b=this,b.$toggleBtn.unbind("click",c.proxy(b.handleToggleBtnClick,b)),a?b.$toggleBtn.bind("click",c.proxy(b.handleToggleBtnClick,b)):void 0},handleToggleBtnClick:function(){var a;return a=this,e("handleToggleBtnClick "+a.isOpen),a.toggleOffCanvasNav(!a.isOpen)},toggleOffCanvasNav:function(a){var b;return b=this,b.isOpen&&!a?b.close():!b.isOpen&&a?b.open():void 0},offcanvasActivate:function(a){var b;return b=this,a?b.$offcanvasNav.css({visibility:"visible"}):b.$offcanvasNav.css({visibility:"hidden"}),b.bindToggleBtn(!a)},coverActivate:function(a){var b;return b=this,b.hasDragged=!1,a?(b.bindGeneralEvents(!0),b.bindEvents(b.$cover,!0),b.handleWindowResize(),b.$cover.addClass(h.coverActiveClass)):(b.bindEvents(b.$cover,!1),b.bindGeneralEvents(!1),b.$cover.removeClass(h.coverActiveClass))},coverOpenToggle:function(a,b,c){var d,f;return null==b&&(b=-1),null==c&&(c=0),e("coverOpenToggle "+a),f=this,d=a?h.xMax:h.xMin,-1===b&&(b=h.animationDuration),f.isOpen=a,a?(f.xCur=f.xCoverDragStart=h.xMax,f.offcanvasActivate(!0)):(f.xCur=f.xCoverDragStart=h.xMin,clearTimeout(f.offcanvasDelay_id),f.offcanvasDelay_id=setTimeout(function(){return f.offcanvasActivate(!1)},c+b+50),f.coverActivate(!1)),f.targetsTransition(d,b,c)},coverDeltaX:function(a){var b,c;return c=this,b=h.xMax+a,b<h.xMin?b=h.xMin:b>h.xMax&&(b=h.xMax),b},coverPlaceDeltaX:function(a){var b,c,d,e,f;return f=this,b=!1,c=f.xCoverDragStart+a,c<h.xMin?c=h.xMin:c>h.xMax&&(c=h.xMax),e="translate("+c+"px, 0)",b=f.xCur!==c,f.xCur=c,f.targetsTransition(c),d=c/(h.xMax-h.xMin),b},targetsTransition:function(a,b,d){var f,g,h,i,j,k;if(k=this,h=i=g="",void 0!==a){if(g="translate("+a+"px, 0)",void 0!==b&&(h="transform "+b+"ms ease",void 0!==d&&d>0&&(i=d+"ms")),e("targetsTrans x:"+a+" time:"+b+"delay:"+d+" transform:"+g+" transitionDelay:"+i+" transition:"+h),!Modernizr.cssanimations)return f={left:targetX+"px"},k.$slideTargets.css(f),k.handleTargetsTransitionEnd();if(d>0&&0===b&&(b=1),j="transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",k.$slideTargets.eq(0).unbind(j,c.proxy(k.handleTargetsTransitionEnd,k)).bind(j,c.proxy(k.handleTargetsTransitionEnd,k)),k.$slideTargets.css({"-webkit-transform":g,"-ie-transform":g,transform:g,"-webkit-transition":"-webkit-"+h,"-ie-transition":"-webkit-"+h,transition:h,"-ie-transition-delay":i,"-webkit-transition-delay":i,"transition-delay":i}),0===b&&0===d)return k.handleTargetsTransitionEnd()}},handleTargetsTransitionEnd:function(){var a;return a=this,e("handleTargetsTransitionEnd isOpen:"+a.isOpen+" _.xCur:"+a.xCur),a.isOpen&&a.xCur===h.xMax?(e('"handleTargetsTransitionEnd EVENT_OFFCANVASNAV_TRANSITION_OPEN_COMPLETE'),c(a).trigger(a.EVENT_OFFCANVASNAV_TRANSITION_OPEN_COMPLETE)):a.isOpen||a.xCur!==h.xMin?void 0:(e('"handleTargetsTransitionEnd EVENT_OFFCANVASNAV_TRANSITION_CLOSE_COMPLETE'),c(a).trigger(a.EVENT_OFFCANVASNAV_TRANSITION_CLOSE_COMPLETE))},bindGeneralEvents:function(d){var e;return e=this,c(a).unbind("resize",c.proxy(e.handleWindowResize,e)).unbind("orientationchange",c.proxy(e.handleOrientationChange,e)).unbind("touchmove mousemove",c.proxy(e.handleCoverTouchMove,e)).unbind("touchend mouseup",c.proxy(e.handleCoverTouchUp,e)),c(b).unbind("touchmove",c.proxy(e.handleEventPrevent,e)),d?(c(a).bind("resize",c.proxy(e.handleWindowResize,e)).bind("orientationchange",c.proxy(e.handleOrientationChange,e)).bind("touchmove mousemove",c.proxy(e.handleCoverTouchMove,e)).bind("touchend mouseup",c.proxy(e.handleCoverTouchUp,e)),c(b).bind("touchmove",c.proxy(e.handleEventPrevent,e))):void 0},bindEvents:function(a,b){var d;return d=this,a.unbind("touchstart mousedown",c.proxy(d.handleCoverTouchDown,d)).unbind("touchmove mousemove",c.proxy(d.handleCoverTouchMove,d)).unbind("touchend mouseup",c.proxy(d.handleCoverTouchUp,d)).unbind("click",c.proxy(d.handleCoverTouchUp,d)),b?a.bind("touchstart mousedown",c.proxy(d.handleCoverTouchDown,d)).bind("touchcancel",c.proxy(d.handleCoverTouchCancel,d)).bind("touchend mouseup",c.proxy(d.handleCoverTouchUp,d)).bind("click",c.proxy(d.handleCoverTouchUp,d)):void 0},bindInnerLinkEvents:function(a){var b,d;return d=this,b=d.$offcanvasNav.find("a"),b.unbind("click tap",c.proxy(d.handleInnerLinkClick,d)),a?b.bind("click tap",c.proxy(d.handleInnerLinkClick,d)):void 0},handleCoverClick:function(a){return a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),e("click")},handleCoverTouchDown:function(a){var b;return b=this,a.preventDefault(),b.hasDragged=!1,b.isTouchDown=!0,b.touchStartX=b.getTouchX(a),b.touchLastX=b.touchStartX,b.isOpen||(b.coverActivate(!0),b.handleCoverTouchMove(a)),e("touch start "+b.touchStartX+" toggleBtn? "+c(a.target).data("offcanvas_isToggleBtn"))},handleCoverTouchMove:function(a){var b,c,d,e;return e=this,a.preventDefault(),e.isTouchDown?(d=e.getTouchX(a),e.touchLastX=d,b=d-e.touchStartX,c=b,e.hasDragged=e.coverPlaceDeltaX(b)):void 0},handleCoverTouchUp:function(a){var b,c,d,f,g;if(g=this,e("!!cover touch end _.isTouchDown:"+g.isTouchDown+" _.xCoverDragStart:"+g.xCoverDragStart+" isOpen:"+g.isOpen+" hasDragged:"+g.hasDragged+" xcur:"+g.xCur+" e.type:"+a.type),"click"===a.type&&(g.isTouchDown=!0,g.touchStartX=g.touchLastX=g.getTouchX(a)),g.isTouchDown){if(g.isTouchDown=!1,f=g.touchLastX,d=Math.abs(f-g.touchStartX),e("touchDeltaX:"+d+" _touchStartX:"+g.touchStartX+" touchX:"+f),!(g.xCur>=h.xMax))return c=.75*(h.xMax+h.xMin),b=g.xCur<=c,e("midX:"+c+" xCur:"+g.xCur+"touchDeltaX:"+d+" xMax"+h.xMax+" bolDoOpen: bolDoClose:"+b+" isOpen:"+g.isOpen+" _.xCoverDragStart:"+g.xCoverDragStart),b?(e("handleCoverTouchUp going for closed"),g.coverOpenToggle(!1)):(e("handleCoverTouchUpgoing for open"),g.coverOpenToggle(!0));if(d<h.xMoveThresholdForClick||isNaN(d))return e("handleCoverTouchUp going for closed from full open"),g.coverOpenToggle(!1)}},handleCoverTouchCancel:function(){var a;return a=this,e("handleCoverTouchCancel"),a.isTouchDown=!1},handleEventPrevent:function(a){return a.preventDefault()},handleOrientationChange:function(){var a;return a=this,a.close()},handleWindowResize:function(){var a,d;return d=this,a=c(b),d.$cover.width(a.width()).height(a.height()),c("header.flyout .nav").height(a.height()+100),e("handleWindowResize _.isOpen:"+d.isOpen+" doc.width:"+a.width()+" breakpoint:"+h.widthBreakPoint),d.isOpen&&a.width()>=h.widthBreakPoint?(e("handleWindowResize gong for closed"),d.coverOpenToggle(!1)):void 0},setWidthBreakPoint:function(a){var b;return b=this,h.widthBreakPoint=a,b.handleWindowResize()},getWidthBreakPoint:function(){return h.widthBreakPoint},bindAPIEvent:function(a,b){var d;return d=this,c(d).bind(a,b)},unbindAPIEvent:function(a,b){var d;return d=this,c(d).unbind(a,b)},handleInnerLinkClick:function(){var a;return a=this,a.close()},getTouchX:function(a){var b,c,d;if(b=a,a.originalEvent&&(b=a.originalEvent),d=b.pageX,Modernizr.touch)try{d=b.touches[0].pageX}catch(e){c=e,d=b.pageX}return d}},g.init(),f={settings:g.settings,open:c.proxy(g.open,g),close:c.proxy(g.close,g),destroy:c.proxy(g.destroy,g),getIsOpen:c.proxy(g.getIsOpen,g),setWidthBreakPoint:c.proxy(g.setWidthBreakPoint,g),getWidthBreakPoint:c.proxy(g.getWidthBreakPoint,g),bind:c.proxy(g.bindAPIEvent,g),unbind:c.proxy(g.unbindAPIEvent,g),EVENT_OFFCANVASNAV_TRANSITION_CLOSE_COMPLETE:g.EVENT_OFFCANVASNAV_TRANSITION_CLOSE_COMPLETE,EVENT_OFFCANVASNAV_TRANSITION_OPEN_COMPLETE:g.EVENT_OFFCANVASNAV_TRANSITION_OPEN_COMPLETE}},d=c("html body"),void 0!==d.attr("data-offcanvas-nav")?(e={},void 0!==d.attr("data-offcanvas-nav-xMax")&&(e.xMax=parseInt(d.attr("data-offcanvas-nav-xMax"),10)),a.offcanvasNav=new a.OffcanvasNav(e)):void 0}(window,document,$)}).call(this),function(){window.blog={initViewCount:function(){var a,b,c,d,e,f;return f="view-"+window.appData.page_id,e=window.location.hostname,a=!1,c=!1,b=!1,store.enabled||(b=!0),b||store.get("omit_myself")===!0||null!==storeWithExpiration.get(f)||-1===e.indexOf(window.appData.devHostname)&&e.indexOf(window.appData.productionHostname)>-1&&(b=!0),a&&(b=!0),d=new Firebase(window.appData.firebaseBlogDomain+window.appData.page_id),d.once("value",function(a){var c;return c=0,a.val()&&(c=a.val().views),(b||0===c)&&(c+=1),$(".detail-views .count").html(c),b||0===c?(d.set({views:c}),storeWithExpiration.set(f,"active",6e4)):void 0})},init:function(){var a=this;return $(document).ready(function(){return"index"!==window.appData.page_id&&a.initViewCount(),$("article").linkExternal(),$("img[usemap]").rwdImageMaps()})}},window.storeWithExpiration={set:function(a,b,c){return store.set(a,{val:b,exp:c,time:(new Date).getTime()})},get:function(a){var b;return b=store.get(a),b?(new Date).getTime()-b.time>b.exp?null:b.val:null}},window.storeOmitMyself=function(a){return store.set("omit_myself",a),store.get("omit_myself")},window.blog.init()}.call(this);